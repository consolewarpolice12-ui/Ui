name: RDP Auto-Renewal - No Tailscale Required

on:
  workflow_dispatch:
  schedule:
    - cron: '0 */6 * * *'

env:
  PERSISTENT_DIR: /Users/runner/persistent_data
  SESSION_DURATION: 21600

jobs:
  rdp-auto-renew:
    runs-on: macos-latest
    timeout-minutes: 400

    steps:
    # Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ¦Ø©
    - name: ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¨ÙŠØ¦Ø© ÙˆØ¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬Ù„Ø³Ø§Øª
      run: |
        echo "ðŸš€ Ø¨Ø¯Ø¡ Ø¥Ø¹Ø¯Ø§Ø¯ Ø¬Ù„Ø³Ø© RDP Ø¬Ø¯ÙŠØ¯Ø© (Ø¨Ø¯ÙˆÙ† Tailscale)..."
        mkdir -p "$PERSISTENT_DIR"
        
        # ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
        find "$PERSISTENT_DIR" -name "session_*" -type d -mtime +0 -exec rm -rf {} \; 2>/dev/null || true
        
        # Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ù„Ø³Ø© Ø¬Ø¯ÙŠØ¯Ø©
        SESSION_COUNT=$(find "$PERSISTENT_DIR" -name "session_*" -type d 2>/dev/null | wc -l | tr -d ' ' || echo "0")
        SESSION_NUMBER=$((SESSION_COUNT + 1))
        CURRENT_DIR="$PERSISTENT_DIR/session_$SESSION_NUMBER"
        mkdir -p "$CURRENT_DIR"
        
        echo "SESSION_NUMBER=$SESSION_NUMBER" >> $GITHUB_ENV
        echo "CURRENT_DIR=$CURRENT_DIR" >> $GITHUB_ENV
        echo "âœ… Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©: $SESSION_NUMBER"

    # Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù‚ÙˆÙŠØ©
    - name: Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù‚ÙˆÙŠØ©
      run: |
        echo "ðŸ” Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø¢Ù…Ù†Ø©..."
        PASSWORD="RDP-$(openssl rand -base64 9 | tr -d '+/=')-$SESSION_NUMBER"
        echo "$PASSWORD" > "$CURRENT_DIR/password.txt"
        echo "LOGIN_PASSWORD=$PASSWORD" >> $GITHUB_ENV
        echo "âœ… ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: $PASSWORD"

    # Ø§Ù„Ø®Ø·ÙˆØ© 3: ØªÙƒÙˆÙŠÙ† Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù†Ø¸Ø§Ù…
    - name: ØªÙƒÙˆÙŠÙ† Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù†Ø¸Ø§Ù…
      run: |
        echo "ðŸ‘¤ ØªÙƒÙˆÙŠÙ† Ù…Ø³ØªØ®Ø¯Ù… RDP..."
        
        if ! id -u "rdpuser" &>/dev/null; then
            echo "Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯..."
            sudo sysadminctl -addUser rdpuser -password "$LOGIN_PASSWORD" -admin
            sudo dscl . -create /Users/rdpuser UserShell /bin/bash
            sudo dscl . -create /Users/rdpuser RealName "RDP User"
            sudo dscl . -create /Users/rdpuser NFSHomeDirectory /Users/rdpuser
            sudo createhomedir -c -u rdpuser
        else
            echo "ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…..."
            sudo sysadminctl -resetPasswordFor rdpuser -newPassword "$LOGIN_PASSWORD"
        fi
        
        sudo dscl . -append /Groups/com.apple.access_remote-desktop GroupMembership rdpuser
        echo "âœ… ØªÙ… ØªÙƒÙˆÙŠÙ† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"

    # Ø§Ù„Ø®Ø·ÙˆØ© 4: ØªÙ…ÙƒÙŠÙ† ÙˆØªÙƒÙˆÙŠÙ† RDP Ù…ØªÙ‚Ø¯Ù…
    - name: ØªÙ…ÙƒÙŠÙ† ÙˆØªÙƒÙˆÙŠÙ† RDP Ù…ØªÙ‚Ø¯Ù…
      run: |
        echo "ðŸ–¥ï¸ ØªÙ…ÙƒÙŠÙ† Ø®Ø¯Ù…Ø§Øª Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø¨Ø¹ÙŠØ¯..."
        
        # ØªÙ…ÙƒÙŠÙ† RDP
        sudo systemsetup -setremotelogin on
        sudo launchctl load -w /System/Library/LaunchDaemons/com.apple.screensharing.plist
        
        # Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø© Ù„Ù„ÙˆØµÙˆÙ„
        sudo defaults write /Library/Preferences/com.apple.RemoteManagement.plist \
            AuthMethod -string "Basic"
        sudo defaults write /Library/Preferences/com.apple.RemoteManagement.plist \
            AllowAllLocalUsers -bool true
        sudo defaults write /Library/Preferences/com.apple.RemoteManagement.plist \
            RestrictAddresses -bool false
        
        # ÙØªØ­ Ù…Ù†Ø§ÙØ° Ø§Ù„Ø¬Ø¯Ø§Ø± Ø§Ù„Ù†Ø§Ø±ÙŠ
        echo "ðŸ”¥ ØªÙƒÙˆÙŠÙ† Ø¬Ø¯Ø§Ø± Ø§Ù„Ø­Ù…Ø§ÙŠØ©..."
        sudo /usr/libexec/ApplicationFirewall/socketfilterfw --add /System/Library/CoreServices/RemoteManagement/ARDAgent.app
        sudo /usr/libexec/ApplicationFirewall/socketfilterfw --unblockapp /System/Library/CoreServices/RemoteManagement/ARDAgent.app
        
        sleep 5
        echo "âœ… ØªÙ… ØªÙƒÙˆÙŠÙ† RDP ÙˆØ¬Ø¯Ø§Ø± Ø§Ù„Ø­Ù…Ø§ÙŠØ©"

    # Ø§Ù„Ø®Ø·ÙˆØ© 5: ØªØ«Ø¨ÙŠØª ÙˆØªÙƒÙˆÙŠÙ† Cloudflare Tunnel (Ø¨Ø¯ÙŠÙ„ Tailscale)
    - name: ØªØ«Ø¨ÙŠØª ÙˆØªÙƒÙˆÙŠÙ† Cloudflare Tunnel
      run: |
        echo "ðŸŒ Ø¥Ø¹Ø¯Ø§Ø¯ Ù†ÙÙ‚ Cloudflare ÙƒØ¨Ø¯ÙŠÙ„..."
        
        # ØªØ«Ø¨ÙŠØª Cloudflare Tunnel
        if ! command -v cloudflared >/dev/null 2>&1; then
            echo "ðŸ“¦ ØªØ«Ø¨ÙŠØª Cloudflare Tunnel..."
            brew install cloudflared || curl -L https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-darwin-amd64.tgz -o /tmp/cloudflared.tgz
            if [ -f /tmp/cloudflared.tgz ]; then
                tar -xzf /tmp/cloudflared.tgz -C /tmp/
                sudo mv /tmp/cloudflared /usr/local/bin/
            fi
        fi
        
        # Ø¥Ù†Ø´Ø§Ø¡ ØªÙƒÙˆÙŠÙ† Ø§ÙØªØ±Ø§Ø¶ÙŠ
        mkdir -p ~/.cloudflared
        cat > ~/.cloudflared/config.yml << EOL
tunnel: github-rdp-tunnel
credentials-file: /Users/runner/.cloudflared/github-rdp-tunnel.json
ingress:
  - hostname: rdp-$SESSION_NUMBER.github.example.com
    service: rdp://localhost:3389
  - service: http_status:404
EOL

        echo "âœ… ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Cloudflare Tunnel"

    # Ø§Ù„Ø®Ø·ÙˆØ© 6: Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¹Ù†ÙˆØ§Ù† IP Ø¹Ø§Ù…
    - name: Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¹Ù†ÙˆØ§Ù† IP Ø¹Ø§Ù…
      run: |
        echo "ðŸŒ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¹Ù†ÙˆØ§Ù† IP Ø¹Ø§Ù…..."
        
        # Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ IP Ø¹Ø§Ù…
        PUBLIC_IP=$(curl -fsS https://api.ipify.org || curl -fsS https://icanhazip.com || echo "UNAVAILABLE")
        
        if [ "$PUBLIC_IP" = "UNAVAILABLE" ]; then
            # Ø§Ø³ØªØ®Ø¯Ø§Ù… IP Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ù„Ø¹Ø±Ø¶
            PUBLIC_IP="143.198.123.456"
            echo "âš ï¸  Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ IP Ø¹Ø§Ù…ØŒ Ø§Ø³ØªØ®Ø¯Ø§Ù… IP Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ù„Ø¹Ø±Ø¶"
        else
            echo "âœ… ØªÙ… Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ IP Ø¹Ø§Ù…: $PUBLIC_IP"
        fi
        
        echo "PUBLIC_IP=$PUBLIC_IP" >> $GITHUB_ENV
        echo "$PUBLIC_IP" > "$CURRENT_DIR/public_ip.txt"
        
        # Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§ØªØµØ§Ù„ Ø¨Ø¯ÙŠÙ„Ø©
        cat > "$CURRENT_DIR/connection_info.txt" << EOL
ðŸ”— Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø¨Ø¯ÙŠÙ„Ø©

ðŸ“‹ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© 1: Ø¹Ø¨Ø± IP Ø§Ù„Ø¹Ø§Ù… (Ù‚Ø¯ Ù„Ø§ ÙŠØ¹Ù…Ù„ Ø­Ø³Ø¨ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ø¨ÙƒØ©)
- Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: $PUBLIC_IP
- Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: rdpuser
- ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: $LOGIN_PASSWORD

ðŸ“‹ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© 2: Ø¹Ø¨Ø± GitHub Codespaces (Ø¥Ù† ÙƒØ§Ù† Ù…ØªØ§Ø­Ø§Ù‹)
- Ø§Ø³ØªØ®Ø¯Ù… GitHub Codespaces Ù…Ø¹ Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ù…Ù†ÙØ°

ðŸ“‹ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© 3: Ø¹Ø¨Ø± Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø·Ø±Ù Ø§Ù„Ø«Ø§Ù„Ø«
- Ngrok: Ù‚Ø¯ ÙŠØ­ØªØ§Ø¬ Ø¥Ø¹Ø¯Ø§Ø¯ Ø¥Ø¶Ø§ÙÙŠ
- Localtonet: Ø¨Ø¯ÙŠÙ„ Ù…Ø¬Ø§Ù†ÙŠ

âš ï¸ Ù…Ù„Ø§Ø­Ø¸Ø©: Ø¨Ø¯ÙˆÙ† TailscaleØŒ Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ù‚Ø¯ Ù„Ø§ ÙŠØ¹Ù…Ù„
Ø§Ø¹ØªÙ…Ø§Ø¯Ø§Ù‹ Ø¹Ù„Ù‰ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø´Ø¨ÙƒØ© GitHub Runner

EOL

    # Ø§Ù„Ø®Ø·ÙˆØ© 7: Ø¥Ø¹Ø¯Ø§Ø¯ Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ù…Ù†Ø§ÙØ°
    - name: Ø¥Ø¹Ø¯Ø§Ø¯ Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ù…Ù†Ø§ÙØ°
      run: |
        echo "ðŸ”€ Ø¥Ø¹Ø¯Ø§Ø¯ Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ù…Ù†Ø§ÙØ°..."
        
        # Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ù…Ù†ÙØ° Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø­Ù„ÙŠ (Ù„Ùˆ ÙƒØ§Ù† Ù…ØªØ§Ø­Ø§Ù‹)
        echo "Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆØ¬ÙŠÙ‡ Ù…Ù†ÙØ° RDP Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø­Ù„ÙŠ..."
        
        # Ø¨Ø¯Ø¡ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©
        nohup socat TCP-LISTEN:33389,fork TCP:localhost:3389 > /dev/null 2>&1 &
        echo $! > "$CURRENT_DIR/socat_pid.txt"
        
        echo "âœ… ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ù…Ù†Ø§ÙØ°"

    # Ø§Ù„Ø®Ø·ÙˆØ© 8: ØªØ«Ø¨ÙŠØª Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
    - name: ØªØ«Ø¨ÙŠØª Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
      run: |
        echo "ðŸ“¦ ØªØ«Ø¨ÙŠØª Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©..."
        
        if ! command -v brew >/dev/null 2>&1; then
            /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
            echo 'eval "$(/opt/homebrew/bin/brew shellenv)"' >> ~/.zprofile
            eval "$(/opt/homebrew/bin/brew shellenv)"
        fi
        
        brew install python git curl wget socat
        
        python3 -m pip install --upgrade pip
        python3 -m pip install requests numpy

    # Ø§Ù„Ø®Ø·ÙˆØ© 9: Ø¥Ù†Ø´Ø§Ø¡ Ø¯Ù„ÙŠÙ„ Ø§ØªØµØ§Ù„ Ù…ÙØµÙ„
    - name: Ø¥Ù†Ø´Ø§Ø¡ Ø¯Ù„ÙŠÙ„ Ø§ØªØµØ§Ù„ Ù…ÙØµÙ„
      run: |
        echo "ðŸ“‹ Ø¥Ù†Ø´Ø§Ø¡ Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø§ØªØµØ§Ù„..."
        
        cat > "$CURRENT_DIR/README.md" << EOL
# ðŸš€ Ø§ØªØµØ§Ù„ RDP (Ø¨Ø¯ÙˆÙ† Tailscale)

## âš ï¸ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ù‡Ù…Ø©
**Ø¨Ø¯ÙˆÙ† TailscaleØŒ Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ù‚Ø¯ Ù„Ø§ ÙŠØ¹Ù…Ù„**
Ù‡Ø°Ø§ Ø¨Ø³Ø¨Ø¨ Ù‚ÙŠÙˆØ¯ Ø´Ø¨ÙƒØ© GitHub Runner

## ðŸ”„ Ø§Ù„Ø·Ø±Ù‚ Ø§Ù„Ø¨Ø¯ÙŠÙ„Ø© Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©

### 1. Ø§Ø³ØªØ®Ø¯Ø§Ù… Tailscale (Ù…Ø³ØªØ­Ø³Ù†)
- Ø³Ø¬Ù„ ÙÙŠ https://tailscale.com
- Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ù…ÙØªØ§Ø­ Ù…Ø¬Ø§Ù†ÙŠ
- Ø£Ø¶Ù Ø§Ù„Ù…ÙØªØ§Ø­ Ø¥Ù„Ù‰ GitHub Secrets

### 2. Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø®Ø¯Ù…Ø§Øª Ø£Ø®Ø±Ù‰
- **Cloudflare Tunnel**: ÙŠØ­ØªØ§Ø¬ Ø¥Ø¹Ø¯Ø§Ø¯ DNS
- **Ngrok**: https://ngrok.com (Ù„Ø¯ÙŠÙ‡ Ù†Ø³Ø®Ø© Ù…Ø¬Ø§Ù†ÙŠØ©)
- **Localtonet**: https://localtonet.com

### 3. Ø§Ø³ØªØ®Ø¯Ø§Ù… GitHub Codespaces
- ØªÙØ¹ÙŠÙ„ Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ù…Ù†Ø§ÙØ°
- Ø§Ù„Ø§ØªØµØ§Ù„ Ø¹Ø¨Ø± localhost

## ðŸ“Š Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©
- **IP Ø§Ù„Ø¸Ø§Ù‡Ø±ÙŠ**: $PUBLIC_IP
- **Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…**: rdpuser
- **ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±**: $LOGIN_PASSWORD
- **Ø§Ù„Ø¬Ù„Ø³Ø©**: $SESSION_NUMBER

## ðŸ› ï¸ Ù„Ø¥Ø¶Ø§ÙØ© Tailscale (Ù…Ø³ØªØ­Ø³Ù†)
1. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ https://tailscale.com
2. Ø£Ù†Ø´Ø¦ Ø­Ø³Ø§Ø¨Ø§Ù‹ Ù…Ø¬Ø§Ù†ÙŠØ§Ù‹
3. Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Auth Key
4. ÙÙŠ GitHub: Settings â†’ Secrets â†’ New secret
5. **Name**: TAILSCALE_AUTH_KEY
6. **Value**: Ù…ÙØªØ§Ø­Ùƒ Ù…Ù† Tailscale

EOL

    # Ø§Ù„Ø®Ø·ÙˆØ© 10: Ø¨Ø¯Ø¡ Ø§Ù„Ø¬Ù„Ø³Ø© Ù…Ø¹ Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©
    - name: Ø¨Ø¯Ø¡ Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
      run: |
        echo "ðŸŽ‰ Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… (Ù…Ø¹ Ù‚ÙŠÙˆØ¯)"
        echo "===================================================="
        echo "   âš ï¸  Ø¨Ø¯ÙˆÙ† Tailscale - Ø§Ù„Ø§ØªØµØ§Ù„ Ù…Ø­Ø¯ÙˆØ¯"
        echo "   ðŸŒ IP: $PUBLIC_IP"
        echo "   ðŸ‘¤ user: rdpuser"
        echo "   ðŸ” password: $LOGIN_PASSWORD"
        echo "===================================================="
        echo ""
        echo "ðŸ“‹ Ù„Ù„Ø§ØªØµØ§Ù„ Ø§Ù„ÙØ¹Ø§Ù„ÙŠ:"
        echo "1. Ø§Ø³ØªØ®Ø¯Ù… Tailscale (Ù…Ø³ØªØ­Ø³Ù†)"
        echo "2. Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… Ø¨Ø¯Ø§Ø¦Ù„ Ù…Ø«Ù„ Ngrok"
        echo "3. Ø£Ø¶Ù Ù…ÙØªØ§Ø­ Tailscale Ø¥Ù„Ù‰ GitHub Secrets"
        echo ""
        
        # Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ Ù…Ø¹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª
        for i in $(seq 1 $SESSION_DURATION); do
            if [ $((i % 300)) -eq 0 ]; then
                REMAINING=$((SESSION_DURATION - i))
                HOURS=$((REMAINING / 3600))
                MINUTES=$(( (REMAINING % 3600) / 60 ))
                echo "â° Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${HOURS}h ${MINUTES}m - Ø¨Ø¯ÙˆÙ† Tailscale"
            fi
            sleep 1
        done

    # Ø§Ù„Ø®Ø·ÙˆØ© 11: Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¬Ù„Ø³Ø©
    - name: Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¬Ù„Ø³Ø©
      run: |
        echo "âœ… Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¬Ù„Ø³Ø© $SESSION_NUMBER"
        date > "$CURRENT_DIR/end_time.txt"
        
        # Ø¥ÙŠÙ‚Ø§Ù Ø¹Ù…Ù„ÙŠØ§Øª Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙˆØ¬ÙŠÙ‡
        if [ -f "$CURRENT_DIR/socat_pid.txt" ]; then
            kill $(cat "$CURRENT_DIR/socat_pid.txt") 2>/dev/null || true
        fi
        
        echo "ðŸ”„ Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„ØªØ§Ù„ÙŠØ© Ø³ØªØ¨Ø¯Ø£ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹"
